<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Đổi mật khẩu</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div class="container">
    <h1>Đổi mật khẩu</h1>
    <% if (message) { %>
      <div class="success"><%= message %></div>
    <% } %>
    <% if (error) { %>
      <div class="error"><%= error %></div>
    <% } %>
    <form action="/change-password" method="post" onsubmit="return checkPasswordMatch()">
      <label for="username">Tài khoản:</label>
      <input type="text" name="username" id="username" value="<%= (typeof session !== 'undefined' && session.user) ? session.user.username : '' %>" readonly />
      <label for="oldPassword">Mật khẩu cũ:</label>
      <input type="password" name="oldPassword" id="oldPassword" required />
      <label for="newPassword">Mật khẩu mới:</label>
      <input type="password" name="newPassword" id="newPassword" required />
      <label for="confirmPassword">Xác nhận mật khẩu mới:</label>
      <input type="password" name="confirmPassword" id="confirmPassword" required />
      <button type="submit">Đổi mật khẩu</button>
    </form>
    <script>
      function checkPasswordMatch() {
        var newPass = document.getElementById('newPassword').value;
        var confirmPass = document.getElementById('confirmPassword').value;
        if (newPass !== confirmPass) {
          alert('Mật khẩu mới và xác nhận không khớp!');
          return false;
        }
        return true;
      }
    </script>
    <div style="margin-top:20px;">
      <a href="/auth/login">Quay lại đăng nhập</a>
    </div>
  </div>
</body>
</html>
